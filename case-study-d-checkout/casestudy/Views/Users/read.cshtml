
@model IEnumerable<casestudy.Filedata>
@{ Layout = null; }

<!DOCTYPE html>

<html>
<head>


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="../content/images/icons/favicon.ico" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../content/vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../content/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../content/vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../content/vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../contentvendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../content/css/util.css">
    <link rel="stylesheet" type="text/css" href="../content/css/main.css">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link href="~/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/modernizr-2.8.3.js"></script>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <!--===============================================================================================-->
    <style>
        body, html {
            height: 100%;
        }


        /* Modify the background color */

        .navbar-custom {
            background-color: #d3d3d3;
            margin-top:0px;
            position:sticky;
        }
            /* Modify brand and text color */

            .navbar-custom .navbar-brand,
            .navbar-custom .navbar-text {
                color: black;
            }

        #example2 {
            background-color: ghostwhite;
            border: 1px solid;
            padding: 5px;
            padding: 70px 70px 70px 70px;
            border-width: 2px;
            margin: 50px 100px 100px 100px;
        }

        #box1 {
            border: 1px solid;
            padding: 10px;
            overflow: auto;
            background-color: ghostwhite;
        }

        #box2 {
            border: 1px solid;
            padding: 10px;
            background-color: ghostwhite;
        }

        mark {
            background-color: grey;
            color: white;
        }

        mark1 {
            background-color: black;
            color: white;
        }

       

        footer {
            text-align: center;
            padding: 3px;
            background-color: darkgrey;
            color: white;
        }

        .sidenav {
            height: 100%;
            width: 150px;
            position: absolute;
            z-index: 1;
            top: 150px;
            left: 0;
            background-color: ghostwhite;
            overflow-x: hidden;
            padding-top: 20px;
        }

            .sidenav h4 {
                padding: 6px 8px 6px 16px;
                text-decoration: none;
                font-size: 13px;
                color: #17252A;
                display: block;
                border: none;
                background: none;
                width: 150px;
                text-align: left;
                cursor: pointer;
                outline: none;
            }

                .sidenav h4:hover {
                    background-color: #228999;
                }
    </style>
</head>
<body style="background-color: #3C1053FF ">
    <nav class="navbar navbar-expand-lg navbar-light navbar-custom py-3">
        <div class="container-fluid">
            @Html.ActionLink("Deloitte.", "Index", "Users", new { area = "" }, new { @class = "navbar-brand" })
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse navbar-right" id="navbarNavDropdown">

                <ul class="navbar-nav px-30 navbar-right">
                    <li class="nav-item px-3">
                        <a class="nav-link" href="/Users/Index2">Dashboard </a>
                    </li>

                    <li class="nav-item px-3">
                        <a class="nav-link" href="/Users/Upload">Upload</a>


                    </li>

                    <li class="nav-item px-3">
                        <a class="nav-link" href="/Users/Edit/?id=@TempData["name"]">User Management </a>

                    </li>




                    @if (User.Identity.IsAuthenticated)
                    {
                        <li class="nav-item px-3"><a class="nav-link">Hello @User.Identity.Name</a></li>
                        <li class="nav-item px-3"><a class="nav-link" href="/Account/logout">Logout</a></li>
                    }
                    else
                    {
                        <li class="nav-item px-3">@Html.ActionLink("login", "login", "Account")</li>
                    }

                </ul>
            </div>
        </div>
    </nav>




    
    <div class="sidenav">
        <h3><mark1>Documets</mark1></h3> 
        @{ newEntities cot = new newEntities();
            var Mo = cot.Filedatas.ToList();
            foreach (var item in Mo)

            {
                var fname = @Html.DisplayFor(modelItem => item.FileName).ToString();
                var uname = @Html.DisplayFor(modelItem => item.Name).ToString();
                var upd = @Html.DisplayFor(modelItem => item.UploadDate).ToString();
                var temname = fname;
                string result = temname.Substring(0, temname.Length - 4);
                <h4 onclick="opencsv('@fname' , '@uname' ,'@upd',2)">@result &emsp;</h4>
            }}

    </div>

    <div class="container body-content ">
        <div id="box1">
            <div class="container">
                <p><h3><mark1>Document metadata</mark1></h3></p>
                <br />

                <p><mark id="m1">Created By :</mark> </p>
                <p><mark id="m3">Created on :</mark> </p>
                <p><mark id="m2">File name  :</mark> </p>
            </div>
        </div>
        <br />
        <br />
        <br />
        <div id="box1">
            <h3><mark1>Processed file data</mark1></h3>
            <div id="datt1">

            </div>
        </div>
        <br />
        <br />
        <br />
        <div id="box1">
            <h3><mark1>Predicted file data</mark1></h3>
            <div id="datt2">

            </div>

        </div>
        <br /><br /><br /><br />
        <hr />
        

    </div>
    <script>

        function opencsv(fname, uname, upd, term) {
            var filename = fname;
            var cn = 0;
            $('#m1').html("Created By:" + uname);
            $('#m2').html("Filename:" + fname);
            $('#m3').html("Uploaded date:" + upd);
            for (var i = 0; i < term; i++) {
                fname = filename;
                if (i == 0) { fname = '../User_Files/temp/' + fname; }
                else { fname = '../User_Files/final/' + fname; }

                console.log(fname);
                $.ajax({
                    url: fname,
                    async: true,
                    type: "GET",
                    dataType: "text",
                    success: function (data) {
                        var table_data = '';

                        var employee_data = data.split(/\r?\n|\r/);
                        table_data = '<table class="table table-bordered">';
                        console.log(table_data);
                        for (var count = 0; count < 5; count++) {
                            var cell_data = employee_data[count].split(',');

                            table_data += '<tr>';
                            for (var cell_count = 0; cell_count < cell_data.length; cell_count++) {
                                if (count === 0) {
                                    table_data += '<th bgcolor="gray">' + cell_data[cell_count] + '</span></th>';
                                }
                                else {
                                    table_data += '<td>' + cell_data[cell_count] + '</td>';
                                }
                            } table_data += '</tr>';

                        } table_data += '</table>';
                        console.log(table_data);
                        if (cn == 0) { $('#datt1').html(table_data); }
                        else { $('#datt2').html(table_data); }
                        cn = cn + 1;



                    }
                });

            }
        }

    </script>
    <footer>
        <p><h4>Footer links and menu items</h4></p>
        <p>Copyright &copy;Deloitte.com|2021</p>
    </footer>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</body>
</html>

